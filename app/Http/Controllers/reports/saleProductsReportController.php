<?php
 namespace App\Http\Controllers\reports; use App\Http\Controllers\Controller; use App\Models\products; use App\Models\sale_details; class saleProductsReportController extends Controller { public function index() { return view("\x72\145\160\157\x72\x74\163\x2e\163\x61\x6c\x65\x50\x72\x6f\144\165\143\164\163\x2e\151\x6e\x64\145\170"); } public function data($from, $to) { $products = products::all(); foreach ($products as $product) { $qty = sale_details::where("\160\x72\x6f\x64\x75\143\x74\x49\x44", $product->id)->whereBetween("\144\141\164\x65", array($from, $to))->sum("\x71\x74\x79"); $bonus = sale_details::where("\x70\x72\157\x64\x75\x63\164\111\104", $product->id)->whereBetween("\x64\x61\x74\x65", array($from, $to))->sum("\x62\x6f\156\165\x73"); $product->qty = $qty; $product->bonus = $bonus; $product->price = avgSalePrice($from, $to, $product->id); } return view("\x72\x65\x70\157\x72\x74\x73\x2e\163\x61\154\145\x50\x72\x6f\144\165\143\164\x73\x2e\x64\x65\164\x61\x69\154\163", compact("\x66\162\157\155", "\x74\157", "\x70\162\157\x64\165\x63\164\163")); } }

<?php
 namespace App\Http\Controllers\reports; use App\Http\Controllers\Controller; use App\Models\accounts; use App\Models\transactions; use Illuminate\Http\Request; class balanceSheetReport extends Controller { public function index() { $accounts = accounts::all(); return view("\x72\145\160\157\162\x74\x73\56\142\x61\x6c\141\156\143\x65\x53\150\x65\145\x74\x2e\x69\156\144\x65\170", compact("\141\143\143\157\165\156\164\163")); } public function data($type, $from, $to) { $ids = accounts::where("\164\171\160\x65", $type)->pluck("\151\x64")->toArray(); $transactions = transactions::whereIn("\141\x63\x63\157\165\x6e\164\111\x44", $ids)->whereBetween("\144\x61\164\x65", array($from, $to))->get(); $pre_cr = transactions::whereIn("\x61\143\143\x6f\165\x6e\164\111\104", $ids)->whereDate("\x64\x61\164\145", "\74", $from)->sum("\143\162"); $pre_db = transactions::whereIn("\x61\143\x63\157\x75\156\x74\x49\x44", $ids)->whereDate("\x64\141\164\145", "\74", $from)->sum("\144\142"); $pre_balance = $pre_cr - $pre_db; $cur_cr = transactions::whereIn("\141\x63\x63\157\165\156\164\x49\x44", $ids)->sum("\143\x72"); $cur_db = transactions::whereIn("\141\x63\143\157\165\156\x74\111\104", $ids)->sum("\144\x62"); $cur_balance = $cur_cr - $cur_db; return view("\162\145\x70\157\162\x74\163\x2e\142\x61\154\x61\x6e\143\145\x53\x68\x65\145\164\56\x64\x65\164\141\151\x6c\x73", compact("\x74\171\x70\x65", "\x74\162\x61\x6e\x73\141\143\164\151\157\x6e\x73", "\x70\x72\x65\137\x62\141\154\141\156\143\x65", "\x63\165\x72\137\x62\141\x6c\141\x6e\143\x65", "\x66\162\157\155", "\x74\157")); } }